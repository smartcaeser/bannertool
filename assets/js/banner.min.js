function Banner(e){fabric.Object.prototype.transparentCorners=!1,fabric.Object.prototype.padding=0,this.canvas=new fabric.Canvas(e),this.layers=[],this.bannerBackgroundColor="#ffffff",this.bannerWidth=300,this.bannerHeight=250,this.bannerZoom=1,this.originalBannerWidth=300,this.originalBannerHeight=250,this.init()}Banner.prototype.init=function(){function e(e){e.target.refresh&&e.target.refresh()}function t(){return function(e){n.dispatchEvent({type:"select",item:e.target})}}var n=this;fabric.Object.prototype.getZIndex=function(){return n.canvas.getObjects().indexOf(this)},fabric.Object.prototype.context=function(){return n.canvas.getContext()},this.canvas.on({"mouse:down":t()}),this.canvas.on("object:modified",e)},Banner.prototype.addText=function(e){var t=new SxText(e);t.on("text:animated",this.canvas.renderAll.bind(this.canvas)),this.canvas.add(t),this.layers[t.id]=t,this.canvas.renderAll()},Banner.prototype.addImage=function(e){var t=new SxImage(e);t.on("image:loaded",this.canvas.renderAll.bind(this.canvas)),this.canvas.add(t),this.layers[t.id]=t,this.canvas.renderAll()},Banner.prototype.getActiveObject=function(){var e=this.canvas.getActiveObject();if(e)return this.layers[e.id]},Banner.prototype.deleteObjects=function(){var e=this.canvas.getActiveObject(),t=this.canvas.getActiveGroup();if(e)confirm("Are you sure?")&&(delete this.layers[e.id],this.canvas.remove(e));else if(t&&confirm("Are you sure?")){var n=t.getObjects();this.canvas.discardActiveGroup(),n.forEach(function(e){delete this.layers[e.id],this.canvas.remove(e)})}},Banner.prototype.deleteObject=function(e){this.canvas.remove(this.layers[e]),delete this.layers[e]},Banner.prototype.updateProp=function(e,t){this[e]=t,this.canvas.setBackgroundColor(this.bannerBackgroundColor),this.canvas.setDimensions({width:this.bannerWidth,height:this.bannerHeight}),this.canvas.renderAll()},Banner.prototype.updateSelectedObject=function(e,t){var n=this.canvas.getActiveObject();n&&(this.layers[n.id].set(e,t),"sortOrder"==e&&this.canvas.moveTo(n,t),this.canvas.trigger("object:modified",{target:this.layers[n.id]}),this.canvas.renderAll())},Banner.prototype.previewTransitionToSelectedObject=function(e,t){var n=this.canvas.getActiveObject();n&&(this.layers[n.id].preview(e,t),this.canvas.renderAll())},Banner.prototype.updateLayerProp=function(e,t,n){var a=this.canvas.setActiveObject(this.layers[e]);a&&(this.layers[e].set(t,n),"sortOrder"==t&&this.canvas.moveTo(a,n),this.canvas.trigger("object:modified",{target:this.layers[e]}),this.canvas.renderAll())},Banner.prototype.selectLayer=function(e){this.canvas.setActiveObject(this.layers[e])},Banner.prototype.run=function(){for(var e in this.layers)this.layers[e].run()},Banner.prototype.load=function(e){this.layers=[];for(var t in e.banner)this.updateProp(t,e.banner[t]);for(var n in e.layers.objects)"sximage"==e.layers.objects[n].type?this.addImage(e.layers.objects[n]):"sxtext"==e.layers.objects[n].type&&this.addText(e.layers.objects[n])},Banner.prototype.getBannerModel=function(){return JSON.stringify({banner:{bannerBackgroundColor:this.bannerBackgroundColor,bannerWidth:this.bannerWidth,bannerHeight:this.bannerHeight,bannerZoom:this.bannerZoom,originalBannerWidth:this.originalBannerWidth,originalBannerHeight:this.originalBannerHeight},layers:this.canvas.toDatalessJSON()})},Object.assign(Banner.prototype,EventDispatcher.prototype);
//# sourceMappingURL=banner.min.js.map